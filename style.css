@import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');

* { 
    box-sizing: border-box; 
    user-select: none; 
    -webkit-tap-highlight-color: transparent; 
    touch-action: none; 
}

:root {
    --bg-color: #34ace0; 
    --accent-red: #ff5252;
    --accent-yellow: #f1c40f;
    --dark-blue: #08276c;
}

html, body {
    margin: 0; padding: 0; width: 100%; height: 100%;
    overflow: hidden; background-color: var(--bg-color);
    font-family: 'Fredoka', sans-serif;
}

.game-container {
    position: relative; width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background: var(--dark-blue); 
}

.canvas-wrapper {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; justify-content: center; align-items: center;
    padding: 65px 20px 45px 20px; /* Space for HUD and Footer */
    box-sizing: border-box;
}

canvas {
    display: block;
    max-width: 100%; max-height: 100%;
    aspect-ratio: 950 / 650;
    border-radius: 12px;
    background-image: url('assets/city_bg.webp'); 
    background-size: cover;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

/* --- COMPACT HUD (FIXED) --- */
.status-bar {
    position: absolute; top: 10px; width: 100%;
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 15px; z-index: 10; pointer-events: none;
}

.compact-badge {
    background: rgba(255, 255, 255, 0.95);
    padding: 6px 18px; border-radius: 50px; /* Increased padding */
    border: 3px solid #2c3e50; 
    display: flex; align-items: center; gap: 10px;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2); 
    pointer-events: auto;
    white-space: nowrap; /* Prevents text from escaping */
    min-width: fit-content;
}

.compact-badge .label { 
    font-size: 0.75rem; font-weight: 700; color: #7f8c8d; 
    letter-spacing: 0.5px;
}

.compact-badge .value { 
    font-size: 1.1rem; font-weight: 700; color: #2c3e50; 
    min-width: 1ch; text-align: center;
}

/* Landscape Mode Tweak */
@media screen and (max-height: 500px) and (orientation: landscape) {
    .compact-badge { padding: 4px 12px; gap: 6px; }
    .compact-badge .value { font-size: 0.9rem; }
}

.action-group { display: flex; gap: 8px; pointer-events: auto; }

.icon-btn, .restart-btn {
    border: 3px solid #2c3e50; border-radius: 50px;
    font-weight: 700; font-family: inherit; cursor: pointer;
    box-shadow: 0 4px 0 #2c3e50; transition: transform 0.1s;
}

.icon-btn { background: #3498db; color: white; width: 38px; height: 38px; }
.restart-btn { background: var(--accent-red); color: white; padding: 0 15px; font-size: 0.8rem; }

button:active { transform: translateY(3px); box-shadow: none; }

/* --- MOBILE LANDSCAPE OPTIMIZATION --- */
@media screen and (max-height: 500px) and (orientation: landscape) {
    .canvas-wrapper { padding: 40px 10px 10px 10px; }
    .status-bar { top: 5px; padding: 0 10px; }
    .compact-badge { padding: 3px 10px; border-width: 2px; }
    .compact-badge .value { font-size: 0.85rem; }
    .icon-btn { width: 30px; height: 30px; border-width: 2px; font-size: 0.8rem; }
    .restart-btn { font-size: 0.7rem; border-width: 2px; height: 30px; }
    footer { display: none; } /* Hide footer to save space */
}

/* --- Overlays & Logic CSS (Unchanged but cleaned) --- */
.overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(8, 39, 108, 0.85); backdrop-filter: blur(4px); display: flex; justify-content: center; align-items: center; z-index: 100; }
.overlay-content { background: white; padding: 20px; border-radius: 20px; border: 4px solid #2c3e50; text-align: center; max-width: 400px; width: 90%; display: flex; flex-direction: column; gap: 10px; }
.instructions { background: #f1f2f6; padding: 10px; border-radius: 12px; text-align: left; font-size: 0.9rem; border: 2px dashed #bdc3c7; }
.big-btn { background: var(--accent-yellow); color: #2c3e50; font-size: 1.2rem; padding: 10px; border-radius: 12px; border: 4px solid #2c3e50; box-shadow: 0 5px 0 #2c3e50; cursor: pointer; font-weight: 800; }
.hidden { display: none !important; }

#rotate-overlay {
    display: none; position: fixed; inset: 0; background: var(--bg-color);
    z-index: 9999; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center;
}
@media screen and (max-width: 600px) and (orientation: portrait) {
    #rotate-overlay { display: flex; }
    .game-container { display: none; }
}